
<section class="data-section section-padding">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-10 mx-auto">
              <form class="custom-form data-form mb-5 mb-lg-0" action="/save_user?username={{.username}}" method="post" role="form">
                <h2 class="text-center mb-4">Ubah Data User</h2>
                
                <div class="ticket-form-body">
                  <label for="nim"><h7 class="text mb-4">NIM</label></h7>
                    <input type="text" class="form-control" name="nim" value="{{.nim}}" required>

                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-12">
                          <label for="username"><h7 class="text mb-4">Username</label></h7>
                            <input type="text" name="new_username" placeholder="" value="{{.username}}" id="username"
                                class="form-control" required>
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                          <label for="nama"><h7 class="text mb-4">Nama</label></h7>
                            <input type="text" name="nama" value="{{.nama}}" id="nama" class="form-control" >
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                          <label for="asal_instansi"><h7 class="text mb-4">Asal Instansi</label></h7>
                            <input type="text" name="asal_instansi" value="{{.asal_instansi}}" id="asal_instansi" class="form-control">
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                            <label for="mulai_pkl"><h7 class="text mb-4">Mulai PKL</label></h7>
                                <input type="text" name="mulai_pkl" value="{{.mulai_pkl.Format "2006-01-02"}}" id="mulai_pkl"
                                    class="form-control" ></font>
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                          <label for="selesai_pkl"><h7 class="text mb-4">Selesai PKL</label></h7>
                                <input type="text" name="selesai_pkl" value="{{.selesai_pkl.Format "2006-01-02"}}" id="selesai_pkl" class="form-control"
                                    ></font>
                        </div>

                        <div class="col-lg-6 col-md-6 col-12">
                          <label for="role"><h7 class="text mb-4">Role</label></h7>
                            <input type="text" name="role" value="{{.role}}" id="role"
                                class="form-control" required>
                        </div>
                       
                        <div class="col-lg-6 col-md-6 col-12">
                          <label for="status"><h7 class="text mb-4">Status PKL </label></h7>
                          <select id="status" name="status" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example">
                              <option value="0" {{if eq .status 0}}selected{{end}}>Tidak Aktif</option>
                              <option value="1" {{if eq .status 1}}selected{{end}}>Aktif</option>
                              <option value="2" {{if eq .status 2}}selected{{end}}>Selesai</option>
                          </select>
                      </div>

                      <div class="col-lg-6 col-md-6 col-12">
                        <label for="respon"><h7 class="text mb-4">Respon Surat</label></h7>
                        <select id="respon" name="respon" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example">
                            <option value="1" {{if eq .respon 1}}selected{{end}}>Pending</option>
                            <option value="2" {{if eq .respon 2}}selected{{end}}>Accepted</option>
                            <option value="3" {{if eq .respon 3}}selected{{end}}>Rejected</option>
                        </select>
                    </div>
                    
                    <div class="col-lg-4 col-md-10 col-8 mx-auto">
                        <button type="submit" value="Save" class="form-control">Simpan</button>
                </div>  
                <br>
            </form>
            </div>
            </div>

            <br>
            <div class="container">
              <div class="row">
              <div class="col-lg-6 col-10 mx-auto">
                  <form class="custom-form ticket-form mb-5 mb-lg-0" action="/home_user" method="post" role="form" enctype="multipart/form-data">
                          <!-- <font color="#cebc1b" ><strong>File yang diunggah sebelumnya : {{.upload_file}}</strong></font> -->
                          {{ if .upload_file }}
                          <p><a href="{{ .upload_file }}">Lihat File</a></p>
                          {{ else }}
                          <p>Tidak ada file</p>
                          {{ end }}
                          <!-- <tr>
                            <td>File:</td>
                            <td>
                                <a href="/uploads/{{.Username}}/{{.UploadFile}}" target="_blank">{{.UploadFile}}</a>
                            </td>
                        </tr> -->
                  </form>
              </div>
          </div>
          </main>


          // upload file
          // // Menerima file yang diunggah
          // file, handler, err := r.FormFile("upload_file")
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
          // defer file.Close()
        
          // // Menyimpan file ke folder uploads dengan nama unik
          // fileName := filepath.Join("uploads", username, handler.Filename)
          // err = os.MkdirAll(filepath.Dir(fileName), 0755)
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
        
          // f, err := os.Create(fileName)
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
          // defer f.Close()
        
          // _, err = io.Copy(f, file)
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
        
          // // Simpan informasi file ke database
          // _, err = db.Exec("UPDATE users SET upload_file = ? WHERE username = ?", fileName, username)
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
          // upload file

          // //upload file
          // // Mengecek apakah folder pengguna sudah ada, jika tidak, maka membuatnya
          // userFolder := fmt.Sprintf("uploads/%s", username)
          // if _, err := os.Stat(userFolder); os.IsNotExist(err) {
          // 	os.Mkdir(userFolder, os.ModePerm)
          // }
      
          // // Menerima file yang diunggah
          // file, handler, err := r.FormFile("upload_file")
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
          // defer file.Close()
      
          // // Menyimpan file ke folder pengguna dengan nama yang unik
          // fileName := filepath.Join(userFolder, fmt.Sprintf("%d_%s", time.Now().Unix(), handler.Filename))
          // f, err := os.Create(fileName)
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
          // defer f.Close()
      
          // _, err = io.Copy(f, file)
          // if err != nil {
          // 	http.Error(w, err.Error(), http.StatusInternalServerError)
          // 	return
          // }
      
          // // Simpan path file ke dalam database
          // if fileName != "" {
          // 	_, err = db.Exec("UPDATE users SET upload_file = ? WHERE username = ?", fileName, username)
          // 	if err != nil {
          // 		http.Error(w, err.Error(), http.StatusInternalServerError)
          // 		return
          // 	}
      
          // }
          // //upload file

          //upload file1
// // Mengecek apakah folder pengguna sudah ada, jika tidak, maka membuatnya
// userFolder := fmt.Sprintf("uploads/%s", username)
// if _, err := os.Stat(userFolder); os.IsNotExist(err) {
// 	os.Mkdir(userFolder, os.ModePerm)
// }

// // Menerima file yang diunggah
// file, handler, err := r.FormFile("upload_file")
// if err != nil {
// 	http.Error(w, err.Error(), http.StatusInternalServerError)
// 	return
// }
// defer file.Close()

// // Menyimpan file ke folder pengguna dengan nama yang unik
// fileName := filepath.Join(userFolder, fmt.Sprintf("%d_%s", time.Now().Unix(), handler.Filename))
// f, err := os.Create(fileName)
// if err != nil {
// 	http.Error(w, err.Error(), http.StatusInternalServerError)
// 	return
// }
// defer f.Close()

// _, err = io.Copy(f, file)
// if err != nil {
// 	http.Error(w, err.Error(), http.StatusInternalServerError)
// 	return
// }

// // Simpan path file ke dalam database
// if fileName != "" {
// 	_, err = db.Exec("UPDATE users SET upload_file = ? WHERE username = ?", fileName, username)
// 	if err != nil {
// 		http.Error(w, err.Error(), http.StatusInternalServerError)
// 		return
// 	}

// }
//upload file1

//upload file2
// userFolder := fmt.Sprintf("uploads/%s", username)
// if _, err := os.Stat(userFolder); os.IsNotExist(err) {

// 	os.Mkdir(userFolder, os.ModePerm)
// }

// var fileName string

// file, handler, err := r.FormFile("upload_file")
// if err != nil {
// 	fileName = "" // File tidak diunggah ulang, tetap gunakan file yang ada
// } else {
// 	defer file.Close()

// 	fileName = filepath.Join(userFolder, fmt.Sprintf("%d_%s", time.Now().Unix(), handler.Filename))
// 	f, err := os.Create(fileName)
// 	if err != nil {
// 		http.Error(w, err.Error(), http.StatusInternalServerError)
// 		return
// 	}
// 	defer f.Close()

// 	_, err = io.Copy(f, file)
// 	if err != nil {
// 		http.Error(w, err.Error(), http.StatusInternalServerError)
// 		return
// 	}
// }
//upload file2
